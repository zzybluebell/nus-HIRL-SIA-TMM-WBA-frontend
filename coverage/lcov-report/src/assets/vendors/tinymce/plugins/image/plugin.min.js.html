
<!doctype html>
<html lang="en">

<head>
    <title>Code coverage report for src/assets/vendors/tinymce/plugins/image/plugin.min.js</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../../../../../../prettify.css" />
    <link rel="stylesheet" href="../../../../../../base.css" />
    <link rel="shortcut icon" type="image/x-icon" href="../../../../../../favicon.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(../../../../../../sort-arrow-sprite.png);
        }
    </style>
</head>
    
<body>
<div class='wrapper'>
    <div class='pad1'>
        <h1><a href="../../../../../../index.html">All files</a> / <a href="index.html">src/assets/vendors/tinymce/plugins/image</a> plugin.min.js</h1>
        <div class='clearfix'>
            
            <div class='fl pad1y space-right2'>
                <span class="strong">0% </span>
                <span class="quiet">Statements</span>
                <span class='fraction'>0/483</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">0% </span>
                <span class="quiet">Branches</span>
                <span class='fraction'>0/382</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">0% </span>
                <span class="quiet">Functions</span>
                <span class='fraction'>0/217</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">0% </span>
                <span class="quiet">Lines</span>
                <span class='fraction'>0/1</span>
            </div>
        
            
        </div>
        <p class="quiet">
            Press <em>n</em> or <em>j</em> to go to the next uncovered block, <em>b</em>, <em>p</em> or <em>k</em> for the previous block.
        </p>
        <template id="filterTemplate">
            <div class="quiet">
                Filter:
                <input oninput="onInput()" type="search" id="fileSearch">
            </div>
        </template>
    </div>
    <div class='status-line low'></div>
    <pre><table class="coverage">
<tr><td class="line-count quiet"><a name='L1'></a><a href='#L1'>1</a>
<a name='L2'></a><a href='#L2'>2</a>
<a name='L3'></a><a href='#L3'>3</a>
<a name='L4'></a><a href='#L4'>4</a></td><td class="line-coverage quiet"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">/**
 * TinyMCE version 6.1.2 (2022-07-29)
 */
<span class="cstat-no" title="statement not covered" >!<span class="fstat-no" title="function not covered" >fu</span>nction(){"use strict";var e=<span class="cstat-no" title="statement not covered" >tinymce.util.Tools.resolve("tinymce.PluginManager");</span>const t=<span class="cstat-no" title="statement not covered" >Object.getPrototypeOf,</span>a=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >(e</span>,t,a)=&gt;{var i;<span class="cstat-no" title="statement not covered" >return!!a(e,t.prototype)||(null===(i=e.constructor)||void 0===i?void 0:i.name)===t.name}</span>,</span>i=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >e=</span>&gt;<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >t=</span>&gt;<span class="cstat-no" title="statement not covered" >(<span class="fstat-no" title="function not covered" >e=</span>&gt;{const t=<span class="cstat-no" title="statement not covered" >typeof e;<span class="cstat-no" title="statement not covered" ></span>return null===e?"null":"object"===t&amp;&amp;Array.isArray(e)?"array":"object"===t&amp;&amp;a(e,String,(<span class="fstat-no" title="function not covered" >(e</span>,t)=&gt;<span class="cstat-no" title="statement not covered" >t.isPrototypeOf(e))</span>)?"string":t}</span>)(t)===e,</span></span></span>s=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >e=</span>&gt;<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >t=</span>&gt;<span class="cstat-no" title="statement not covered" >typeof t===e,</span></span></span>r=<span class="cstat-no" title="statement not covered" >i("string"),</span>o=<span class="cstat-no" title="statement not covered" >i("object"),</span>n=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >e=</span>&gt;<span class="cstat-no" title="statement not covered" >(<span class="fstat-no" title="function not covered" >(e</span>,i)=&gt;<span class="cstat-no" title="statement not covered" >o(e)&amp;&amp;a(e,i,(<span class="fstat-no" title="function not covered" >(e</span>,a)=&gt;<span class="cstat-no" title="statement not covered" >t(e)===a)</span>))</span>(e,Object),</span></span>l=<span class="cstat-no" title="statement not covered" >i("array"),</span>c=(<span class="cstat-no" title="statement not covered" >null,<span class="fstat-no" title="function not covered" >e=</span>&gt;<span class="cstat-no" title="statement not covered" >null===e)</span></span>;const m=<span class="cstat-no" title="statement not covered" >s("boolean"),</span>d=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >e=</span>&gt;<span class="cstat-no" title="statement not covered" >!(<span class="fstat-no" title="function not covered" >e=</span>&gt;<span class="cstat-no" title="statement not covered" >null==e)</span>(e),</span></span>g=<span class="cstat-no" title="statement not covered" >s("function"),</span>p=<span class="cstat-no" title="statement not covered" >s("number"),</span>u=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >()</span>=&gt;{};</span>class h{<span class="fstat-no" title="function not covered" >co</span>nstructor(e,t){<span class="cstat-no" title="statement not covered" >this.tag=e,this.value=t}<span class="fstat-no" title="function not covered" ></span>st</span>atic some(e){<span class="cstat-no" title="statement not covered" >return new h(!0,e)}<span class="fstat-no" title="function not covered" ></span>st</span>atic none(){<span class="cstat-no" title="statement not covered" >return h.singletonNone}<span class="fstat-no" title="function not covered" ></span>fo</span>ld(e,t){<span class="cstat-no" title="statement not covered" >return this.tag?t(this.value):e()}<span class="fstat-no" title="function not covered" ></span>is</span>Some(){<span class="cstat-no" title="statement not covered" >return this.tag}<span class="fstat-no" title="function not covered" ></span>is</span>None(){<span class="cstat-no" title="statement not covered" >return!this.tag}<span class="fstat-no" title="function not covered" ></span>ma</span>p(e){<span class="cstat-no" title="statement not covered" >return this.tag?h.some(e(this.value)):h.none()}<span class="fstat-no" title="function not covered" ></span>bi</span>nd(e){<span class="cstat-no" title="statement not covered" >return this.tag?e(this.value):h.none()}<span class="fstat-no" title="function not covered" ></span>ex</span>ists(e){<span class="cstat-no" title="statement not covered" >return this.tag&amp;&amp;e(this.value)}<span class="fstat-no" title="function not covered" ></span>fo</span>rall(e){<span class="cstat-no" title="statement not covered" >return!this.tag||e(this.value)}<span class="fstat-no" title="function not covered" ></span>fi</span>lter(e){<span class="cstat-no" title="statement not covered" >return!this.tag||e(this.value)?this:h.none()}<span class="fstat-no" title="function not covered" ></span>ge</span>tOr(e){<span class="cstat-no" title="statement not covered" >return this.tag?this.value:e}<span class="fstat-no" title="function not covered" ></span>or</span>(e){<span class="cstat-no" title="statement not covered" >return this.tag?this:e}<span class="fstat-no" title="function not covered" ></span>ge</span>tOrThunk(e){<span class="cstat-no" title="statement not covered" >return this.tag?this.value:e()}<span class="fstat-no" title="function not covered" ></span>or</span>Thunk(e){<span class="cstat-no" title="statement not covered" >return this.tag?this:e()}<span class="fstat-no" title="function not covered" ></span>ge</span>tOrDie(e){<span class="cstat-no" title="statement not covered" >if(this.tag)<span class="cstat-no" title="statement not covered" >return this.value;<span class="cstat-no" title="statement not covered" >t</span></span>hrow new Error(null!=e?e:"Called getOrDie on None")}<span class="fstat-no" title="function not covered" ></span>st</span>atic from(e){<span class="cstat-no" title="statement not covered" >return d(e)?h.some(e):h.none()}<span class="fstat-no" title="function not covered" ></span>ge</span>tOrNull(){<span class="cstat-no" title="statement not covered" >return this.tag?this.value:null}<span class="fstat-no" title="function not covered" ></span>ge</span>tOrUndefined(){<span class="cstat-no" title="statement not covered" >return this.value}<span class="fstat-no" title="function not covered" ></span>ea</span>ch(e){<span class="cstat-no" title="statement not covered" >this.tag&amp;&amp;e(this.value)}<span class="fstat-no" title="function not covered" ></span>to</span>Array(){<span class="cstat-no" title="statement not covered" >return this.tag?[this.value]:[]}<span class="fstat-no" title="function not covered" ></span>to</span>String(){<span class="cstat-no" title="statement not covered" >return this.tag?`some(${this.value})`:"none()"}</span>}<span class="cstat-no" title="statement not covered" >h.singletonNone=new h(!1);c</span>onst b=<span class="cstat-no" title="statement not covered" >Object.keys,</span>y=<span class="cstat-no" title="statement not covered" >Object.hasOwnProperty,</span>v=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >(e</span>,t)=&gt;<span class="cstat-no" title="statement not covered" >y.call(e,t),</span></span>f=<span class="cstat-no" title="statement not covered" >Array.prototype.push,</span>w=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >e=</span>&gt;{const t=<span class="cstat-no" title="statement not covered" >[];<span class="cstat-no" title="statement not covered" ></span>for(let a=<span class="cstat-no" title="statement not covered" >0,</span>i=<span class="cstat-no" title="statement not covered" >e.length;</span>a&lt;i;++a){<span class="cstat-no" title="statement not covered" >if(!l(e[a]))<span class="cstat-no" title="statement not covered" >throw new Error("Arr.flatten item "+a+" was not an array, input: "+e);<span class="cstat-no" title="statement not covered" >f</span></span>.apply(t,e[a])}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn t}</span>;<span class="cstat-no" title="statement not covered" ></span>"undefined"!=typeof window?window:Function("return this;")();c</span>onst A=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >(e</span>,t,a)=&gt;{<span class="cstat-no" title="statement not covered" >(<span class="fstat-no" title="function not covered" >(e</span>,t,a)=&gt;{<span class="cstat-no" title="statement not covered" >if(!(r(a)||m(a)||p(a)))<span class="cstat-no" title="statement not covered" >throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",a,":: Element ",e),new Error("Attribute value was not simple");<span class="cstat-no" title="statement not covered" >e</span></span>.setAttribute(t,a+"")}</span>)(e.dom,t,a)}</span>,</span>D=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >e=</span>&gt;{<span class="cstat-no" title="statement not covered" >if(null==e)<span class="cstat-no" title="statement not covered" >throw new Error("Node cannot be null or undefined");<span class="cstat-no" title="statement not covered" >r</span></span>eturn{dom:e}}</span>,</span>_=<span class="cstat-no" title="statement not covered" >D;</span>var C=<span class="cstat-no" title="statement not covered" >tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),</span>I=<span class="cstat-no" title="statement not covered" >tinymce.util.Tools.resolve("tinymce.util.URI");</span>const U=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >e=</span>&gt;<span class="cstat-no" title="statement not covered" >e.length&gt;0,</span></span>x=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >e=</span>&gt;<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >t=</span>&gt;<span class="cstat-no" title="statement not covered" >t.options.get(e),</span></span></span>S=<span class="cstat-no" title="statement not covered" >x("image_dimensions"),</span>N=<span class="cstat-no" title="statement not covered" >x("image_advtab"),</span>T=<span class="cstat-no" title="statement not covered" >x("image_uploadtab"),</span>O=<span class="cstat-no" title="statement not covered" >x("image_prepend_url"),</span>L=<span class="cstat-no" title="statement not covered" >x("image_class_list"),</span>E=<span class="cstat-no" title="statement not covered" >x("image_description"),</span>j=<span class="cstat-no" title="statement not covered" >x("image_title"),</span>M=<span class="cstat-no" title="statement not covered" >x("image_caption"),</span>R=<span class="cstat-no" title="statement not covered" >x("image_list"),</span>k=<span class="cstat-no" title="statement not covered" >x("a11y_advanced_options"),</span>z=<span class="cstat-no" title="statement not covered" >x("automatic_uploads"),</span>P=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >(e</span>,t)=&gt;<span class="cstat-no" title="statement not covered" >Math.max(parseInt(e,10),parseInt(t,10)),</span></span>B=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >e=</span>&gt;(<span class="cstat-no" title="statement not covered" >e&amp;&amp;(e=e.replace(/px$/,"")),e)</span>,</span>F=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >e=</span>&gt;(<span class="cstat-no" title="statement not covered" >e.length&gt;0&amp;&amp;/^[0-9]+$/.test(e)&amp;&amp;(e+="px"),e)</span>,</span>H=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >e=</span>&gt;<span class="cstat-no" title="statement not covered" >"IMG"===e.nodeName&amp;&amp;(e.hasAttribute("data-mce-object")||e.hasAttribute("data-mce-placeholder")),</span></span>G=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >(e</span>,t)=&gt;{const a=<span class="cstat-no" title="statement not covered" >e.options.get;<span class="cstat-no" title="statement not covered" ></span>return I.isDomSafe(t,"img",{allow_html_data_urls:a("allow_html_data_urls"),allow_script_urls:a("allow_script_urls"),allow_svg_data_urls:a("allow_svg_data_urls")})}</span>,</span>W=<span class="cstat-no" title="statement not covered" >C.DOM,</span>$=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >e=</span>&gt;<span class="cstat-no" title="statement not covered" >e.style.marginLeft&amp;&amp;e.style.marginRight&amp;&amp;e.style.marginLeft===e.style.marginRight?B(e.style.marginLeft):"",</span></span>V=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >e=</span>&gt;<span class="cstat-no" title="statement not covered" >e.style.marginTop&amp;&amp;e.style.marginBottom&amp;&amp;e.style.marginTop===e.style.marginBottom?B(e.style.marginTop):"",</span></span>K=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >e=</span>&gt;<span class="cstat-no" title="statement not covered" >e.style.borderWidth?B(e.style.borderWidth):"",</span></span>Z=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >(e</span>,t)=&gt;<span class="cstat-no" title="statement not covered" >e.hasAttribute(t)?e.getAttribute(t):"",</span></span>q=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >(e</span>,t)=&gt;<span class="cstat-no" title="statement not covered" >e.style[t]?e.style[t]:"",</span></span>J=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >e=</span>&gt;<span class="cstat-no" title="statement not covered" >null!==e.parentNode&amp;&amp;"FIGURE"===e.parentNode.nodeName,</span></span>Q=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >(e</span>,t,a)=&gt;{<span class="cstat-no" title="statement not covered" >""===a?e.removeAttribute(t):e.setAttribute(t,a)}</span>,</span>X=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >(e</span>,t)=&gt;{const a=<span class="cstat-no" title="statement not covered" >e.getAttribute("style"),</span>i=<span class="cstat-no" title="statement not covered" >t(null!==a?a:"");<span class="cstat-no" title="statement not covered" ></span>i.length&gt;0?(e.setAttribute("style",i),e.setAttribute("data-mce-style",i)):e.removeAttribute("style")}</span>,</span>Y=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >(e</span>,t)=&gt;<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >(e</span>,a,i)=&gt;{<span class="cstat-no" title="statement not covered" >e.style[a]?(e.style[a]=F(i),X(e,t)):Q(e,a,i)}</span>,</span></span>ee=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >(e</span>,t)=&gt;<span class="cstat-no" title="statement not covered" >e.style[t]?B(e.style[t]):Z(e,t),</span></span>te=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >(e</span>,t)=&gt;{const a=<span class="cstat-no" title="statement not covered" >F(t);<span class="cstat-no" title="statement not covered" ></span>e.style.marginLeft=a,e.style.marginRight=a}</span>,</span>ae=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >(e</span>,t)=&gt;{const a=<span class="cstat-no" title="statement not covered" >F(t);<span class="cstat-no" title="statement not covered" ></span>e.style.marginTop=a,e.style.marginBottom=a}</span>,</span>ie=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >(e</span>,t)=&gt;{const a=<span class="cstat-no" title="statement not covered" >F(t);<span class="cstat-no" title="statement not covered" ></span>e.style.borderWidth=a}</span>,</span>se=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >(e</span>,t)=&gt;{<span class="cstat-no" title="statement not covered" >e.style.borderStyle=t}</span>,</span>re=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >e=</span>&gt;<span class="cstat-no" title="statement not covered" >"FIGURE"===e.nodeName,</span></span>oe=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >e=</span>&gt;<span class="cstat-no" title="statement not covered" >0===W.getAttrib(e,"alt").length&amp;&amp;"presentation"===W.getAttrib(e,"role"),</span></span>ne=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >e=</span>&gt;<span class="cstat-no" title="statement not covered" >oe(e)?"":Z(e,"alt"),</span></span>le=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >(e</span>,t)=&gt;{const a=<span class="cstat-no" title="statement not covered" >document.createElement("img");<span class="cstat-no" title="statement not covered" ></span>return Q(a,"style",t.style),($(a)||""!==t.hspace)&amp;&amp;te(a,t.hspace),(V(a)||""!==t.vspace)&amp;&amp;ae(a,t.vspace),(K(a)||""!==t.border)&amp;&amp;ie(a,t.border),((<span class="fstat-no" title="function not covered" >e=</span>&gt;<span class="cstat-no" title="statement not covered" >q(e,"borderStyle"))</span>(a)||""!==t.borderStyle)&amp;&amp;se(a,t.borderStyle),e(a.getAttribute("style"))}</span>,</span>ce=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >(e</span>,t)=&gt;(<span class="cstat-no" title="statement not covered" >{src:Z(t,"src"),alt:ne(t),title:Z(t,"title"),width:ee(t,"width"),height:ee(t,"height"),class:Z(t,"class"),style:e(Z(t,"style")),caption:J(t),hspace:$(t),vspace:V(t),border:K(t),borderStyle:q(t,"borderStyle"),isDecorative:oe(t)})</span>,</span>me=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >(e</span>,t,a,i,s)=&gt;{<span class="cstat-no" title="statement not covered" >a[i]!==t[i]&amp;&amp;s(e,i,a[i])}</span>,</span>de=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >(e</span>,t,a)=&gt;{<span class="cstat-no" title="statement not covered" >if(a){<span class="cstat-no" title="statement not covered" >W.setAttrib(e,"role","presentation");c</span>onst t=<span class="cstat-no" title="statement not covered" >_(e);<span class="cstat-no" title="statement not covered" ></span>A(t,"alt","")}</span>else{<span class="cstat-no" title="statement not covered" >if(c(t)){<span class="cstat-no" title="statement not covered" >"alt",_(e).dom.removeAttribute("alt")}</span>else{const a=<span class="cstat-no" title="statement not covered" >_(e);<span class="cstat-no" title="statement not covered" ></span>A(a,"alt",t)}<span class="cstat-no" title="statement not covered" ></span>"</span>presentation"===W.getAttrib(e,"role")&amp;&amp;W.setAttrib(e,"role","")}</span>}</span>,</span>ge=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >(e</span>,t)=&gt;<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >(a</span>,i,s)=&gt;{<span class="cstat-no" title="statement not covered" >e(a,s),X(a,t)}</span>,</span></span>pe=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >(e</span>,t,a)=&gt;{const i=<span class="cstat-no" title="statement not covered" >ce(e,a);<span class="cstat-no" title="statement not covered" ></span>me(a,i,t,"caption",(<span class="fstat-no" title="function not covered" >(e</span>,t,a)=&gt;<span class="cstat-no" title="statement not covered" >(<span class="fstat-no" title="function not covered" >e=</span>&gt;{<span class="cstat-no" title="statement not covered" >J(e)?(<span class="fstat-no" title="function not covered" >e=</span>&gt;{const t=<span class="cstat-no" title="statement not covered" >e.parentNode;<span class="cstat-no" title="statement not covered" ></span>W.insertAfter(e,t),W.remove(t)}</span>)(e):(<span class="fstat-no" title="function not covered" >e=</span>&gt;{const t=<span class="cstat-no" title="statement not covered" >W.create("figure",{class:"image"});<span class="cstat-no" title="statement not covered" ></span>W.insertAfter(t,e),t.appendChild(e),t.appendChild(W.create("figcaption",{contentEditable:"true"},"Caption")),t.contentEditable="false"}</span>)(e)}</span>)(e))</span>),me(a,i,t,"src",Q),me(a,i,t,"title",Q),me(a,i,t,"width",Y(0,e)),me(a,i,t,"height",Y(0,e)),me(a,i,t,"class",Q),me(a,i,t,"style",ge((<span class="fstat-no" title="function not covered" >(e</span>,t)=&gt;<span class="cstat-no" title="statement not covered" >Q(e,"style",t))</span>,e)),me(a,i,t,"hspace",ge(te,e)),me(a,i,t,"vspace",ge(ae,e)),me(a,i,t,"border",ge(ie,e)),me(a,i,t,"borderStyle",ge(se,e)),(<span class="fstat-no" title="function not covered" >(e</span>,t,a)=&gt;{<span class="cstat-no" title="statement not covered" >a.alt===t.alt&amp;&amp;a.isDecorative===t.isDecorative||de(e,a.alt,a.isDecorative)}</span>)(a,i,t)}</span>,</span>ue=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >(e</span>,t)=&gt;{const a=<span class="cstat-no" title="statement not covered" >(<span class="fstat-no" title="function not covered" >e=</span>&gt;{<span class="cstat-no" title="statement not covered" >if(e.margin){const t=<span class="cstat-no" title="statement not covered" >String(e.margin).split(" ");<span class="cstat-no" title="statement not covered" ></span>switch(t.length){case 1:<span class="cstat-no" title="statement not covered" >e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[0],e["margin-bottom"]=e["margin-bottom"]||t[0],e["margin-left"]=e["margin-left"]||t[0];<span class="cstat-no" title="statement not covered" >b</span>reak;c</span>ase 2:<span class="cstat-no" title="statement not covered" >e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[1],e["margin-bottom"]=e["margin-bottom"]||t[0],e["margin-left"]=e["margin-left"]||t[1];<span class="cstat-no" title="statement not covered" >b</span>reak;c</span>ase 3:<span class="cstat-no" title="statement not covered" >e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[1],e["margin-bottom"]=e["margin-bottom"]||t[2],e["margin-left"]=e["margin-left"]||t[1];<span class="cstat-no" title="statement not covered" >b</span>reak;c</span>ase 4:<span class="cstat-no" title="statement not covered" >e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[1],e["margin-bottom"]=e["margin-bottom"]||t[2],e["margin-left"]=e["margin-left"]||t[3]}<span class="cstat-no" title="statement not covered" ></span>d</span>elete e.margin}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn e}</span>)(e.dom.styles.parse(t)),</span>i=<span class="cstat-no" title="statement not covered" >e.dom.styles.parse(e.dom.styles.serialize(a));<span class="cstat-no" title="statement not covered" ></span>return e.dom.styles.serialize(i)}</span>,</span>he=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >e=</span>&gt;{const t=<span class="cstat-no" title="statement not covered" >e.selection.getNode(),</span>a=<span class="cstat-no" title="statement not covered" >e.dom.getParent(t,"figure.image");<span class="cstat-no" title="statement not covered" ></span>return a?e.dom.select("img",a)[0]:t&amp;&amp;("IMG"!==t.nodeName||H(t))?null:t}</span>,</span>be=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >(e</span>,t)=&gt;{const a=<span class="cstat-no" title="statement not covered" >e.dom,</span>i=<span class="cstat-no" title="statement not covered" >(<span class="fstat-no" title="function not covered" >(t</span>,a)=&gt;{const i=<span class="cstat-no" title="statement not covered" >{};</span>var s;<span class="cstat-no" title="statement not covered" >return(<span class="fstat-no" title="function not covered" >(e</span>,t,a,i)=&gt;{<span class="cstat-no" title="statement not covered" >(<span class="fstat-no" title="function not covered" >(e</span>,t)=&gt;{const a=<span class="cstat-no" title="statement not covered" >b(e);<span class="cstat-no" title="statement not covered" ></span>for(let i=<span class="cstat-no" title="statement not covered" >0,</span>s=<span class="cstat-no" title="statement not covered" >a.length;</span>i&lt;s;i++){const s=<span class="cstat-no" title="statement not covered" >a[i];<span class="cstat-no" title="statement not covered" ></span>t(e[s],s)}</span>}</span>)(e,(<span class="fstat-no" title="function not covered" >(e</span>,s)=&gt;{<span class="cstat-no" title="statement not covered" >(t(e,s)?a:i)(e,s)}</span>))}</span>)(t,(<span class="fstat-no" title="function not covered" >(t</span>,a)=&gt;<span class="cstat-no" title="statement not covered" >!e.schema.isValidChild(a,"figure"))</span>,(s=i,<span class="fstat-no" title="function not covered" >(e</span>,t)=&gt;{<span class="cstat-no" title="statement not covered" >s[t]=e}</span>),u),i}</span>)(e.schema.getTextBlockElements()),</span>s=<span class="cstat-no" title="statement not covered" >a.getParent(t.parentNode,(<span class="fstat-no" title="function not covered" >e=</span>&gt;{<span class="cstat-no" title="statement not covered" >return t=i,a=e.nodeName,v(t,a)&amp;&amp;void 0!==t[a]&amp;&amp;null!==t[a];v</span>ar t,a}),e.getBody());<span class="cstat-no" title="statement not covered" ></span>return s?a.split(s,t):t}</span>,</span>ye=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >(e</span>,t)=&gt;{const a=<span class="cstat-no" title="statement not covered" >(<span class="fstat-no" title="function not covered" >(t</span>,a)=&gt;{const i=<span class="cstat-no" title="statement not covered" >document.createElement("img");<span class="cstat-no" title="statement not covered" ></span>if(pe((<span class="fstat-no" title="function not covered" >t=</span>&gt;<span class="cstat-no" title="statement not covered" >ue(e,t))</span>,{...a,caption:!1},i),de(i,a.alt,a.isDecorative),a.caption){const e=<span class="cstat-no" title="statement not covered" >W.create("figure",{class:"image"});<span class="cstat-no" title="statement not covered" ></span>return e.appendChild(i),e.appendChild(W.create("figcaption",{contentEditable:"true"},"Caption")),e.contentEditable="false",e}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn i}</span>)(0,t);<span class="cstat-no" title="statement not covered" ></span>e.dom.setAttrib(a,"data-mce-id","__mcenew"),e.focus(),e.selection.setContent(a.outerHTML);c</span>onst i=<span class="cstat-no" title="statement not covered" >e.dom.select('*[data-mce-id="__mcenew"]')[0];<span class="cstat-no" title="statement not covered" ></span>if(e.dom.setAttrib(i,"data-mce-id",null),re(i)){const t=<span class="cstat-no" title="statement not covered" >be(e,i);<span class="cstat-no" title="statement not covered" ></span>e.selection.select(t)}</span>else <span class="cstat-no" title="statement not covered" >e.selection.select(i)}</span></span>,</span>ve=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >(e</span>,t)=&gt;{const a=<span class="cstat-no" title="statement not covered" >he(e);<span class="cstat-no" title="statement not covered" ></span>if(a){const i=<span class="cstat-no" title="statement not covered" >{...ce((<span class="fstat-no" title="function not covered" >t=</span>&gt;<span class="cstat-no" title="statement not covered" >ue(e,t))</span>,a),...t},</span>s=<span class="cstat-no" title="statement not covered" >(<span class="fstat-no" title="function not covered" >(e</span>,t)=&gt;{const a=<span class="cstat-no" title="statement not covered" >t.src;<span class="cstat-no" title="statement not covered" ></span>return{...t,src:G(e,a)?a:""}}</span>)(e,i);<span class="cstat-no" title="statement not covered" ></span>i.src?(<span class="fstat-no" title="function not covered" >(e</span>,t)=&gt;{const a=<span class="cstat-no" title="statement not covered" >he(e);<span class="cstat-no" title="statement not covered" ></span>if(pe((<span class="fstat-no" title="function not covered" >t=</span>&gt;<span class="cstat-no" title="statement not covered" >ue(e,t))</span>,t,a),(<span class="fstat-no" title="function not covered" >(e</span>,t)=&gt;{<span class="cstat-no" title="statement not covered" >e.dom.setAttrib(t,"src",t.getAttribute("src"))}</span>)(e,a),re(a.parentNode)){const t=<span class="cstat-no" title="statement not covered" >a.parentNode;<span class="cstat-no" title="statement not covered" ></span>be(e,t),e.selection.select(a.parentNode)}</span>else <span class="cstat-no" title="statement not covered" >e.selection.select(a),(<span class="fstat-no" title="function not covered" >(e</span>,t,a)=&gt;{const i=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >()</span>=&gt;{<span class="cstat-no" title="statement not covered" >a.onload=a.onerror=null,e.selection&amp;&amp;(e.selection.select(a),e.nodeChanged())}</span>;<span class="cstat-no" title="statement not covered" ></span>a.onload=<span class="fstat-no" title="function not covered" >()</span>=&gt;{<span class="cstat-no" title="statement not covered" >t.width||t.height||!S(e)||e.dom.setAttribs(a,{width:String(a.clientWidth),height:String(a.clientHeight)}),i()}</span>,a.onerror=i}</span>)(e,t,a)}</span></span>)(e,s):(<span class="fstat-no" title="function not covered" >(e</span>,t)=&gt;{<span class="cstat-no" title="statement not covered" >if(t){const a=<span class="cstat-no" title="statement not covered" >e.dom.is(t.parentNode,"figure.image")?t.parentNode:t;<span class="cstat-no" title="statement not covered" ></span>e.dom.remove(a),e.focus(),e.nodeChanged(),e.dom.isEmpty(e.getBody())&amp;&amp;(e.setContent(""),e.selection.setCursorLocation())}</span>}</span>)(e,a)}</span>else <span class="cstat-no" title="statement not covered" >t.src&amp;&amp;ye(e,{src:"",alt:"",title:"",width:"",height:"",class:"",style:"",caption:!1,hspace:"",vspace:"",border:"",borderStyle:"",isDecorative:!1,...t})}</span></span>,</span>fe=(<span class="cstat-no" title="statement not covered" >we=<span class="fstat-no" title="function not covered" >(e</span>,t)=&gt;<span class="cstat-no" title="statement not covered" >n(e)&amp;&amp;n(t)?fe(e,t):t,<span class="fstat-no" title="function not covered" ></span>(.</span>..e)=&gt;{<span class="cstat-no" title="statement not covered" >if(0===e.length)<span class="cstat-no" title="statement not covered" >throw new Error("Can't merge zero objects");c</span></span>onst t=<span class="cstat-no" title="statement not covered" >{};<span class="cstat-no" title="statement not covered" ></span>for(let a=<span class="cstat-no" title="statement not covered" >0;</span>a&lt;e.length;a++){const i=<span class="cstat-no" title="statement not covered" >e[a];<span class="cstat-no" title="statement not covered" ></span>for(const e in i)<span class="cstat-no" title="statement not covered" >v(i,e)&amp;&amp;(t[e]=we(t[e],i[e]))}<span class="cstat-no" title="statement not covered" ></span></span>r</span>eturn t}</span>)</span>;var we,Ae=<span class="cstat-no" title="statement not covered" >tinymce.util.Tools.resolve("tinymce.util.ImageUploader"),</span>De=<span class="cstat-no" title="statement not covered" >tinymce.util.Tools.resolve("tinymce.util.Tools");</span>const _e=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >e=</span>&gt;<span class="cstat-no" title="statement not covered" >r(e.value)?e.value:"",</span></span>Ce=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >(e</span>,t)=&gt;{const a=<span class="cstat-no" title="statement not covered" >[];<span class="cstat-no" title="statement not covered" ></span>return De.each(e,(<span class="fstat-no" title="function not covered" >e=</span>&gt;{const i=<span class="cstat-no" title="statement not covered" >(<span class="fstat-no" title="function not covered" >e=</span>&gt;<span class="cstat-no" title="statement not covered" >r(e.text)?e.text:r(e.title)?e.title:"")</span>(e);<span class="cstat-no" title="statement not covered" ></span>if(void 0!==e.menu){const s=<span class="cstat-no" title="statement not covered" >Ce(e.menu,t);<span class="cstat-no" title="statement not covered" ></span>a.push({text:i,items:s})}</span>else{const s=<span class="cstat-no" title="statement not covered" >t(e);<span class="cstat-no" title="statement not covered" ></span>a.push({text:i,value:s})}</span>}</span>)),a}</span>,</span>Ie=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >(e</span>=<span class="branch-0 cbranch-no" title="branch not covered" >_e)</span>=&gt;<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >t=</span>&gt;<span class="cstat-no" title="statement not covered" >t?h.from(t).map((<span class="fstat-no" title="function not covered" >t=</span>&gt;<span class="cstat-no" title="statement not covered" >Ce(t,e))</span>):h.none(),</span></span></span>Ue=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >(e</span>,t)=&gt;<span class="cstat-no" title="statement not covered" >(<span class="fstat-no" title="function not covered" >(e</span>,a)=&gt;{<span class="cstat-no" title="statement not covered" >for(let a=<span class="cstat-no" title="statement not covered" >0;</span>a&lt;e.length;a++){const s=<span class="cstat-no" title="statement not covered" >(<span class="fstat-no" title="function not covered" >e=</span>&gt;<span class="cstat-no" title="statement not covered" >v(e,"items"))</span>(i=e[a])?Ue(i.items,t):i.value===t?h.some(i):h.none();<span class="cstat-no" title="statement not covered" ></span>if(s.isSome())<span class="cstat-no" title="statement not covered" >return s}</span></span>v</span>ar i;<span class="cstat-no" title="statement not covered" >return h.none()}</span>)(e),</span></span>xe=<span class="cstat-no" title="statement not covered" >Ie,</span>Se=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >(e</span>,t)=&gt;<span class="cstat-no" title="statement not covered" >e.bind((<span class="fstat-no" title="function not covered" >e=</span>&gt;<span class="cstat-no" title="statement not covered" >Ue(e,t))</span>),</span></span>Ne=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >e=</span>&gt;{const t=<span class="cstat-no" title="statement not covered" >xe((<span class="fstat-no" title="function not covered" >t=</span>&gt;<span class="cstat-no" title="statement not covered" >e.convertURL(t.value||t.url,"src"))</span>),</span>a=<span class="cstat-no" title="statement not covered" >new Promise((<span class="fstat-no" title="function not covered" >a=</span>&gt;{<span class="cstat-no" title="statement not covered" >(<span class="fstat-no" title="function not covered" >(e</span>,t)=&gt;{const a=<span class="cstat-no" title="statement not covered" >R(e);<span class="cstat-no" title="statement not covered" ></span>r(a)?fetch(a).then((<span class="fstat-no" title="function not covered" >e=</span>&gt;{<span class="cstat-no" title="statement not covered" >e.ok&amp;&amp;e.json().then(t)}</span>)):g(a)?a(t):t(a)}</span>)(e,(<span class="fstat-no" title="function not covered" >e=</span>&gt;{<span class="cstat-no" title="statement not covered" >a(t(e).map((<span class="fstat-no" title="function not covered" >e=</span>&gt;<span class="cstat-no" title="statement not covered" >w([[{text:"None",value:""}],e]))</span>))}</span>))}</span>)),</span>i=(<span class="cstat-no" title="statement not covered" >A=L(e),Ie(_e)(A))</span>,s=<span class="cstat-no" title="statement not covered" >N(e),</span>o=<span class="cstat-no" title="statement not covered" >T(e),</span>n=<span class="cstat-no" title="statement not covered" >(<span class="fstat-no" title="function not covered" >e=</span>&gt;<span class="cstat-no" title="statement not covered" >U(e.options.get("images_upload_url")))</span>(e),</span>l=<span class="cstat-no" title="statement not covered" >(<span class="fstat-no" title="function not covered" >e=</span>&gt;<span class="cstat-no" title="statement not covered" >d(e.options.get("images_upload_handler")))</span>(e),</span>c=<span class="cstat-no" title="statement not covered" >(<span class="fstat-no" title="function not covered" >e=</span>&gt;{const t=<span class="cstat-no" title="statement not covered" >he(e);<span class="cstat-no" title="statement not covered" ></span>return t?ce((<span class="fstat-no" title="function not covered" >t=</span>&gt;<span class="cstat-no" title="statement not covered" >ue(e,t))</span>,t):{src:"",alt:"",title:"",width:"",height:"",class:"",style:"",caption:!1,hspace:"",vspace:"",border:"",borderStyle:"",isDecorative:!1}}</span>)(e),</span>m=<span class="cstat-no" title="statement not covered" >E(e),</span>p=<span class="cstat-no" title="statement not covered" >j(e),</span>u=<span class="cstat-no" title="statement not covered" >S(e),</span>b=<span class="cstat-no" title="statement not covered" >M(e),</span>y=<span class="cstat-no" title="statement not covered" >k(e),</span>v=<span class="cstat-no" title="statement not covered" >z(e),</span>f=<span class="cstat-no" title="statement not covered" >h.some(O(e)).filter((<span class="fstat-no" title="function not covered" >e=</span>&gt;<span class="cstat-no" title="statement not covered" >r(e)&amp;&amp;e.length&gt;0)</span>);</span>var A;<span class="cstat-no" title="statement not covered" >return a.then((<span class="fstat-no" title="function not covered" >e=</span>&gt;(<span class="cstat-no" title="statement not covered" >{image:c,imageList:e,classList:i,hasAdvTab:s,hasUploadTab:o,hasUploadUrl:n,hasUploadHandler:l,hasDescription:m,hasImageTitle:p,hasDimensions:u,hasImageCaption:b,prependURL:f,hasAccessibilityOptions:y,automaticUploads:v})</span>))}</span>,</span>Te=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >e=</span>&gt;{const t=<span class="cstat-no" title="statement not covered" >e.imageList.map((<span class="fstat-no" title="function not covered" >e=</span>&gt;(<span class="cstat-no" title="statement not covered" >{name:"images",type:"listbox",label:"Image list",items:e})</span>)),</span>a=<span class="cstat-no" title="statement not covered" >{name:"alt",type:"input",label:"Alternative description",enabled:!(e.hasAccessibilityOptions&amp;&amp;e.image.isDecorative)},</span>i=<span class="cstat-no" title="statement not covered" >e.classList.map((<span class="fstat-no" title="function not covered" >e=</span>&gt;(<span class="cstat-no" title="statement not covered" >{name:"classes",type:"listbox",label:"Class",items:e})</span>));<span class="cstat-no" title="statement not covered" ></span>return w([[{name:"src",type:"urlinput",filetype:"image",label:"Source"}],t.toArray(),e.hasAccessibilityOptions&amp;&amp;e.hasDescription?[{type:"label",label:"Accessibility",items:[{name:"isDecorative",type:"checkbox",label:"Image is decorative"}]}]:[],e.hasDescription?[a]:[],e.hasImageTitle?[{name:"title",type:"input",label:"Image title"}]:[],e.hasDimensions?[{name:"dimensions",type:"sizeinput"}]:[],[{...(s=e.classList.isSome()&amp;&amp;e.hasImageCaption,s?{type:"grid",columns:2}:{type:"panel"}),items:w([i.toArray(),e.hasImageCaption?[{type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]}]:[]])}]]);v</span>ar s},</span>Oe=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >e=</span>&gt;(<span class="cstat-no" title="statement not covered" >{title:"General",name:"general",items:Te(e)})</span>,</span>Le=<span class="cstat-no" title="statement not covered" >Te,</span>Ee=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >e=</span>&gt;(<span class="cstat-no" title="statement not covered" >{src:{value:e.src,meta:{}},images:e.src,alt:e.alt,title:e.title,dimensions:{width:e.width,height:e.height},classes:e.class,caption:e.caption,style:e.style,vspace:e.vspace,border:e.border,hspace:e.hspace,borderstyle:e.borderStyle,fileinput:[],isDecorative:e.isDecorative})</span>,</span>je=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >(e</span>,t)=&gt;(<span class="cstat-no" title="statement not covered" >{src:e.src.value,alt:0===e.alt.length&amp;&amp;t?null:e.alt,title:e.title,width:e.dimensions.width,height:e.dimensions.height,class:e.classes,style:e.style,caption:e.caption,hspace:e.hspace,vspace:e.vspace,border:e.border,borderStyle:e.borderstyle,isDecorative:e.isDecorative})</span>,</span>Me=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >(e</span>,t,a,i)=&gt;{<span class="cstat-no" title="statement not covered" >(<span class="fstat-no" title="function not covered" >(e</span>,t)=&gt;{const a=<span class="cstat-no" title="statement not covered" >t.getData();<span class="cstat-no" title="statement not covered" ></span>(<span class="fstat-no" title="function not covered" >(e</span>,t)=&gt;<span class="cstat-no" title="statement not covered" >/^(?:[a-zA-Z]+:)?\/\//.test(t)?h.none():e.prependURL.bind((<span class="fstat-no" title="function not covered" >e=</span>&gt;<span class="cstat-no" title="statement not covered" >t.substring(0,e.length)!==e?h.some(e+t):h.none())</span>))</span>(e,a.src.value).each((<span class="fstat-no" title="function not covered" >e=</span>&gt;{<span class="cstat-no" title="statement not covered" >t.setData({src:{value:e,meta:a.src.meta}})}</span>))}</span>)(t,i),(<span class="fstat-no" title="function not covered" >(e</span>,t)=&gt;{const a=<span class="cstat-no" title="statement not covered" >t.getData(),</span>i=<span class="cstat-no" title="statement not covered" >a.src.meta;<span class="cstat-no" title="statement not covered" ></span>if(void 0!==i){const s=<span class="cstat-no" title="statement not covered" >fe({},a);<span class="cstat-no" title="statement not covered" ></span>(<span class="fstat-no" title="function not covered" >(e</span>,t,a)=&gt;{<span class="cstat-no" title="statement not covered" >e.hasDescription&amp;&amp;r(a.alt)&amp;&amp;(t.alt=a.alt),e.hasAccessibilityOptions&amp;&amp;(t.isDecorative=a.isDecorative||t.isDecorative||!1),e.hasImageTitle&amp;&amp;r(a.title)&amp;&amp;(t.title=a.title),e.hasDimensions&amp;&amp;(r(a.width)&amp;&amp;(t.dimensions.width=a.width),r(a.height)&amp;&amp;(t.dimensions.height=a.height)),r(a.class)&amp;&amp;Se(e.classList,a.class).each((<span class="fstat-no" title="function not covered" >e=</span>&gt;{<span class="cstat-no" title="statement not covered" >t.classes=e.value}</span>)),e.hasImageCaption&amp;&amp;m(a.caption)&amp;&amp;(t.caption=a.caption),e.hasAdvTab&amp;&amp;(r(a.style)&amp;&amp;(t.style=a.style),r(a.vspace)&amp;&amp;(t.vspace=a.vspace),r(a.border)&amp;&amp;(t.border=a.border),r(a.hspace)&amp;&amp;(t.hspace=a.hspace),r(a.borderstyle)&amp;&amp;(t.borderstyle=a.borderstyle))}</span>)(e,s,i),t.setData(s)}</span>}</span>)(t,i),(<span class="fstat-no" title="function not covered" >(e</span>,t,a,i)=&gt;{const s=<span class="cstat-no" title="statement not covered" >i.getData(),</span>r=<span class="cstat-no" title="statement not covered" >s.src.value,</span>o=<span class="cstat-no" title="statement not covered" >s.src.meta||{};<span class="cstat-no" title="statement not covered" ></span>o.width||o.height||!t.hasDimensions||(U(r)?e.imageSize(r).then((<span class="fstat-no" title="function not covered" >e=</span>&gt;{<span class="cstat-no" title="statement not covered" >a.open&amp;&amp;i.setData({dimensions:e})}</span>)).catch((<span class="fstat-no" title="function not covered" >e=</span>&gt;<span class="cstat-no" title="statement not covered" >console.error(e))</span>):i.setData({dimensions:{width:"",height:""}}))}</span>)(e,t,a,i),(<span class="fstat-no" title="function not covered" >(e</span>,t,a)=&gt;{const i=<span class="cstat-no" title="statement not covered" >a.getData(),</span>s=<span class="cstat-no" title="statement not covered" >Se(e.imageList,i.src.value);<span class="cstat-no" title="statement not covered" ></span>t.prevImage=s,a.setData({images:s.map((<span class="fstat-no" title="function not covered" >e=</span>&gt;<span class="cstat-no" title="statement not covered" >e.value)</span>).getOr("")})}</span>)(t,a,i)}</span>,</span>Re=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >(e</span>,t,a,i)=&gt;{const s=<span class="cstat-no" title="statement not covered" >i.getData();</span>var r;<span class="cstat-no" title="statement not covered" >i.block("Uploading image"),(r=s.fileinput,(<span class="fstat-no" title="function not covered" >(e</span>,t)=&gt;<span class="cstat-no" title="statement not covered" >0&lt;e.length?h.some(e[0]):h.none())</span>(r)).fold((<span class="fstat-no" title="function not covered" >()</span>=&gt;{<span class="cstat-no" title="statement not covered" >i.unblock()}</span>),(<span class="fstat-no" title="function not covered" >s=</span>&gt;{const r=<span class="cstat-no" title="statement not covered" >URL.createObjectURL(s),</span>o=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >()</span>=&gt;{<span class="cstat-no" title="statement not covered" >i.unblock(),URL.revokeObjectURL(r)}</span>,</span>n=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >s=</span>&gt;{<span class="cstat-no" title="statement not covered" >i.setData({src:{value:s,meta:{}}}),i.showTab("general"),Me(e,t,a,i)}</span>;</span>var l;<span class="cstat-no" title="statement not covered" >(l=s,new Promise((<span class="fstat-no" title="function not covered" >(e</span>,t)=&gt;{const a=<span class="cstat-no" title="statement not covered" >new FileReader;<span class="cstat-no" title="statement not covered" ></span>a.onload=<span class="fstat-no" title="function not covered" >()</span>=&gt;{<span class="cstat-no" title="statement not covered" >e(a.result)}</span>,a.onerror=<span class="fstat-no" title="function not covered" >()</span>=&gt;{<span class="cstat-no" title="statement not covered" >t(a.error.message)}</span>,a.readAsDataURL(l)}</span>))).then((<span class="fstat-no" title="function not covered" >a=</span>&gt;{const l=<span class="cstat-no" title="statement not covered" >e.createBlobCache(s,r,a);<span class="cstat-no" title="statement not covered" ></span>t.automaticUploads?e.uploadImage(l).then((<span class="fstat-no" title="function not covered" >e=</span>&gt;{<span class="cstat-no" title="statement not covered" >n(e.url),o()}</span>)).catch((<span class="fstat-no" title="function not covered" >t=</span>&gt;{<span class="cstat-no" title="statement not covered" >o(),e.alertErr(t)}</span>)):(e.addToBlobCache(l),n(l.blobUri()),i.unblock())}</span>))}</span>))}</span>,</span>ke=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >(e</span>,t,a)=&gt;<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >(i</span>,s)=&gt;{<span class="cstat-no" title="statement not covered" >"src"===s.name?Me(e,t,a,i):"images"===s.name?(<span class="fstat-no" title="function not covered" >(e</span>,t,a,i)=&gt;{const s=<span class="cstat-no" title="statement not covered" >i.getData(),</span>r=<span class="cstat-no" title="statement not covered" >Se(t.imageList,s.images);<span class="cstat-no" title="statement not covered" ></span>r.each((<span class="fstat-no" title="function not covered" >e=</span>&gt;{const t=<span class="cstat-no" title="statement not covered" >""===s.alt||a.prevImage.map((<span class="fstat-no" title="function not covered" >e=</span>&gt;<span class="cstat-no" title="statement not covered" >e.text===s.alt)</span>).getOr(!1);<span class="cstat-no" title="statement not covered" ></span>t?""===e.value?i.setData({src:e,alt:a.prevAlt}):i.setData({src:e,alt:e.text}):i.setData({src:e})}</span>)),a.prevImage=r,Me(e,t,a,i)}</span>)(e,t,a,i):"alt"===s.name?a.prevAlt=i.getData().alt:"fileinput"===s.name?Re(e,t,a,i):"isDecorative"===s.name&amp;&amp;i.setEnabled("alt",!i.getData().isDecorative)}</span>,</span></span>ze=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >e=</span>&gt;<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >()</span>=&gt;{<span class="cstat-no" title="statement not covered" >e.open=!1}</span>,</span></span>Pe=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >e=</span>&gt;<span class="cstat-no" title="statement not covered" >e.hasAdvTab||e.hasUploadUrl||e.hasUploadHandler?{type:"tabpanel",tabs:w([[Oe(e)],e.hasAdvTab?[{title:"Advanced",name:"advanced",items:[{type:"grid",columns:2,items:[{type:"input",label:"Vertical space",name:"vspace",inputMode:"numeric"},{type:"input",label:"Horizontal space",name:"hspace",inputMode:"numeric"},{type:"input",label:"Border width",name:"border",inputMode:"numeric"},{type:"listbox",name:"borderstyle",label:"Border style",items:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]}]}]}]:[],e.hasUploadTab&amp;&amp;(e.hasUploadUrl||e.hasUploadHandler)?[{title:"Upload",name:"upload",items:[{type:"dropzone",name:"fileinput"}]}]:[]])}:{type:"panel",items:Le(e)},</span></span>Be=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >(e</span>,t,a)=&gt;<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >i=</span>&gt;{const s=<span class="cstat-no" title="statement not covered" >fe(Ee(t.image),i.getData()),</span>r=<span class="cstat-no" title="statement not covered" >{...s,style:le(a.normalizeCss,je(s,!1))};<span class="cstat-no" title="statement not covered" ></span>e.execCommand("mceUpdateImage",!1,je(r,t.hasAccessibilityOptions)),e.editorUpload.uploadImagesAuto(),i.close()}</span>,</span></span>Fe=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >e=</span>&gt;<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >t=</span>&gt;<span class="cstat-no" title="statement not covered" >G(e,t)?(<span class="fstat-no" title="function not covered" >e=</span>&gt;<span class="cstat-no" title="statement not covered" >new Promise((<span class="fstat-no" title="function not covered" >t=</span>&gt;{const a=<span class="cstat-no" title="statement not covered" >document.createElement("img"),</span>i=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >e=</span>&gt;{<span class="cstat-no" title="statement not covered" >a.onload=a.onerror=null,a.parentNode&amp;&amp;a.parentNode.removeChild(a),t(e)}</span>;<span class="cstat-no" title="statement not covered" ></span>a.onload=<span class="fstat-no" title="function not covered" >()</span>=&gt;{const e=<span class="cstat-no" title="statement not covered" >{width:P(a.width,a.clientWidth),height:P(a.height,a.clientHeight)};<span class="cstat-no" title="statement not covered" ></span>i(Promise.resolve(e))}</span>,a.onerror=<span class="fstat-no" title="function not covered" >()</span>=&gt;{<span class="cstat-no" title="statement not covered" >i(Promise.reject(`Failed to get image dimensions for: ${e}`))}</span>;c</span>onst s=<span class="cstat-no" title="statement not covered" >a.style;<span class="cstat-no" title="statement not covered" ></span>s.visibility="hidden",s.position="fixed",s.bottom=s.left="0px",s.width=s.height="auto",document.body.appendChild(a),a.src=e}</span>)))</span>(e.documentBaseURI.toAbsolute(t)).then((<span class="fstat-no" title="function not covered" >e=</span>&gt;(<span class="cstat-no" title="statement not covered" >{width:String(e.width),height:String(e.height)})</span>)):Promise.resolve({width:"",height:""}),</span></span></span>He=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >e=</span>&gt;<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >(t</span>,a,i)=&gt;<span class="cstat-no" title="statement not covered" >e.editorUpload.blobCache.create({blob:t,blobUri:a,name:t.name?t.name.replace(/\.[^\.]+$/,""):null,filename:t.name,base64:i.split(",")[1]}),</span></span></span>Ge=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >e=</span>&gt;<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >t=</span>&gt;{<span class="cstat-no" title="statement not covered" >e.editorUpload.blobCache.add(t)}</span>,</span></span>We=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >e=</span>&gt;<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >t=</span>&gt;{<span class="cstat-no" title="statement not covered" >e.windowManager.alert(t)}</span>,</span></span>$e=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >e=</span>&gt;<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >t=</span>&gt;<span class="cstat-no" title="statement not covered" >ue(e,t),</span></span></span>Ve=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >e=</span>&gt;<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >t=</span>&gt;<span class="cstat-no" title="statement not covered" >e.dom.parseStyle(t),</span></span></span>Ke=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >e=</span>&gt;<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >(t</span>,a)=&gt;<span class="cstat-no" title="statement not covered" >e.dom.serializeStyle(t,a),</span></span></span>Ze=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >e=</span>&gt;<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >t=</span>&gt;<span class="cstat-no" title="statement not covered" >Ae(e).upload([t],!1).then((<span class="fstat-no" title="function not covered" >e=</span>&gt;<span class="cstat-no" title="statement not covered" >0===e.length?Promise.reject("Failed to upload image"):!1===e[0].status?Promise.reject(e[0].error.message):e[0])</span>),</span></span></span>qe=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >e=</span>&gt;{const t=<span class="cstat-no" title="statement not covered" >{imageSize:Fe(e),addToBlobCache:Ge(e),createBlobCache:He(e),alertErr:We(e),normalizeCss:$e(e),parseStyle:Ve(e),serializeStyle:Ke(e),uploadImage:Ze(e)};<span class="cstat-no" title="statement not covered" ></span>return{open:<span class="fstat-no" title="function not covered" >()</span>=&gt;{<span class="cstat-no" title="statement not covered" >Ne(e).then((<span class="fstat-no" title="function not covered" >a=</span>&gt;{const i=<span class="cstat-no" title="statement not covered" >(<span class="fstat-no" title="function not covered" >e=</span>&gt;(<span class="cstat-no" title="statement not covered" >{prevImage:Se(e.imageList,e.image.src),prevAlt:e.image.alt,open:!0})</span>)(a);<span class="cstat-no" title="statement not covered" ></span>return{title:"Insert/Edit Image",size:"normal",body:Pe(a),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:Ee(a.image),onSubmit:Be(e,a,t),onChange:ke(t,a,i),onClose:ze(i)}}</span>)).then(e.windowManager.open)}</span>}}</span>,</span>Je=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >e=</span>&gt;{const t=<span class="cstat-no" title="statement not covered" >e.attr("class");<span class="cstat-no" title="statement not covered" ></span>return t&amp;&amp;/\bimage\b/.test(t)}</span>,</span>Qe=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >e=</span>&gt;<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >t=</span>&gt;{let a=<span class="cstat-no" title="statement not covered" >t.length;</span>const i=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >t=</span>&gt;{<span class="cstat-no" title="statement not covered" >t.attr("contenteditable",e?"true":null)}</span>;<span class="cstat-no" title="statement not covered" ></span>for(;a--;){const s=<span class="cstat-no" title="statement not covered" >t[a];<span class="cstat-no" title="statement not covered" ></span>Je(s)&amp;&amp;(s.attr("contenteditable",e?"false":null),De.each(s.getAll("figcaption"),i))}</span>}</span>;<span class="cstat-no" title="statement not covered" ></span></span>e.add("image",(<span class="fstat-no" title="function not covered" >e=</span>&gt;{<span class="cstat-no" title="statement not covered" >(<span class="fstat-no" title="function not covered" >e=</span>&gt;{const t=<span class="cstat-no" title="statement not covered" >e.options.register;<span class="cstat-no" title="statement not covered" ></span>t("image_dimensions",{processor:"boolean",default:!0}),t("image_advtab",{processor:"boolean",default:!1}),t("image_uploadtab",{processor:"boolean",default:!0}),t("image_prepend_url",{processor:"string",default:""}),t("image_class_list",{processor:"object[]"}),t("image_description",{processor:"boolean",default:!0}),t("image_title",{processor:"boolean",default:!1}),t("image_caption",{processor:"boolean",default:!1}),t("image_list",{processor:<span class="fstat-no" title="function not covered" >e=</span>&gt;{const t=<span class="cstat-no" title="statement not covered" >!1===e||r(e)||(<span class="fstat-no" title="function not covered" >(e</span>,t)=&gt;{<span class="cstat-no" title="statement not covered" >if(l(e)){<span class="cstat-no" title="statement not covered" >for(let a=<span class="cstat-no" title="statement not covered" >0,</span>i=<span class="cstat-no" title="statement not covered" >e.length;</span>a&lt;i;++a)<span class="cstat-no" title="statement not covered" >if(!t(e[a]))<span class="cstat-no" title="statement not covered" >return!1;<span class="cstat-no" title="statement not covered" >r</span></span></span>eturn!0}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn!1}</span>)(e,o)||g(e);<span class="cstat-no" title="statement not covered" ></span>return t?{value:e,valid:t}:{valid:!1,message:"Must be false, a string, an array or a function."}}</span>,default:!1})}</span>)(e),(<span class="fstat-no" title="function not covered" >e=</span>&gt;{<span class="cstat-no" title="statement not covered" >e.on("PreInit",(<span class="fstat-no" title="function not covered" >()</span>=&gt;{<span class="cstat-no" title="statement not covered" >e.parser.addNodeFilter("figure",Qe(!0)),e.serializer.addNodeFilter("figure",Qe(!1))}</span>))}</span>)(e),(<span class="fstat-no" title="function not covered" >e=</span>&gt;{<span class="cstat-no" title="statement not covered" >e.ui.registry.addToggleButton("image",{icon:"image",tooltip:"Insert/edit image",onAction:qe(e).open,onSetup:<span class="fstat-no" title="function not covered" >t=</span>&gt;(<span class="cstat-no" title="statement not covered" >t.setActive(d(he(e))),e.selection.selectorChangedWithUnbind("img:not([data-mce-object]):not([data-mce-placeholder]),figure.image",t.setActive).unbind)</span>}),e.ui.registry.addMenuItem("image",{icon:"image",text:"Image...",onAction:qe(e).open}),e.ui.registry.addContextMenu("image",{update:<span class="fstat-no" title="function not covered" >e=</span>&gt;<span class="cstat-no" title="statement not covered" >re(e)||"IMG"===e.nodeName&amp;&amp;!H(e)?["image"]:[]}</span>)}</span>)(e),(<span class="fstat-no" title="function not covered" >e=</span>&gt;{<span class="cstat-no" title="statement not covered" >e.addCommand("mceImage",qe(e).open),e.addCommand("mceUpdateImage",(<span class="fstat-no" title="function not covered" >(t</span>,a)=&gt;{<span class="cstat-no" title="statement not covered" >e.undoManager.transact((<span class="fstat-no" title="function not covered" >()</span>=&gt;<span class="cstat-no" title="statement not covered" >ve(e,a))</span>)}</span>))}</span>)(e)}</span>))}</span>();</span></pre></td></tr></table></pre>

                <div class='push'></div><!-- for sticky footer -->
            </div><!-- /wrapper -->
            <div class='footer quiet pad2 space-top1 center small'>
                Code coverage generated by
                <a href="https://istanbul.js.org/" target="_blank" rel="noopener noreferrer">istanbul</a>
                at 2025-01-20T09:55:08.196Z
            </div>
        <script src="../../../../../../prettify.js"></script>
        <script>
            window.onload = function () {
                prettyPrint();
            };
        </script>
        <script src="../../../../../../sorter.js"></script>
        <script src="../../../../../../block-navigation.js"></script>
    </body>
</html>
    